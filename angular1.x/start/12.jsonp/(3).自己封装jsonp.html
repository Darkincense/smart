<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>

<body>
  <button id="btn">获取数据</button>
  <script>
    function fn(data) {
      console.log(data)
    }
  </script>
  <script>
    var oBtn = document.getElementById('btn');

    oBtn.onclick = function () {

      var script = document.createElement('script');

      script.src = "https://api.douban.com/v2/movie/in_theaters?callback=fn&start=0&count=10";

      document.body.appendChild(script)

    }


		/*{
			start:0,
			count:10
		}*/

		/*var a = 10;

		window.a = 10;

		this.a = 10;*/

    myJsonp('https://api.douban.com/v2/movie/in_theaters', {
      start: 0,
      count: 10
    }, function (data) {

      console.log(1)

    })

    myJsonp('https://api.douban.com/v2/movie/in_theaters', {
      start: 0,
      count: 10
    }, function (data) {

      console.log(2)

    })

    function myJsonp(url, data, callback) {

      var fnName = "myJsonp_" + Math.random().toString().replace('.', '');

      window[fnName] = callback;

      var querystring = '';

      for (var attr in data) {

        querystring += attr + '=' + data[attr] + '&'

      }

      var script = document.createElement('script');

      script.src = url + '?' + querystring + 'callback=' + fnName;

      script.onload = function () {

        document.body.removeChild(script);

      }

      document.body.appendChild(script);

    }

  </script>
</body>

</html>