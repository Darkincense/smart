<view>
  <view class='searchBar'>
    <view class="location oneLineCenter" bindtap='getCityList'>
      <text class="city">{{location}}</text>
      <image class='locationIcon' src="../../assets/nowLocation.png"  mode ="aspectFit"></image>
    </view>
    <view class='inputBox'>
      <input type="text" value="{{keyWord}}" placeholder="输入位置" placeholder-class="place" class='searchTxt' bindfocus="xuanZhong" bindinput='chooseTextInput' bindblur="finishiInput">
      </input>
      <block wx:if="{{!isEdit}}">
        <image class="searchIcon" src="../../assets/search.png" style="width:30rpx;height:30rpx;"></image>
      </block>
      <block wx:if="{{isEdit}}">
        <image class='deleteIcon' form-type="reset" bindtap='deleteFn' src="../../assets/delete.png" style="width:24rpx;height:24rpx;"></image>
      </block>
    </view>
    <view class='oneLineCenter searchBox' bindtap='nearby_search'>
      <text>搜索</text>
    </view>
  </view>
  <view class='gap' style='height:20rpx;'> </view>
  <block wx:if="{{isReInput}}">
    <view class='locationList'>
      <!-- 附近位置定位 -->
      <view>
        <view class='locationArea oneLineBetween'>
          <text>六州大厦</text>
          <view class='reLocation'>
            <image class='location' src="../../assets/startLocation.png" mode="aspectFit" style='width:36rpx;height:36rpx;'></image>
            <text class='text' bindtap="getCenterLocation">重新定位</text>

          </view>
        </view>
      </view>
      <view class='nearbyAd'>
        <text class='title'>附近地址</text>
        <view class='listBox'>
          <view class='list_item oneLineStart'>
            <text class='key'>高碑店</text>
          </view>
        </view>
      </view>
    </view>
  </block>
  <view class='map' style="height:{{mapHeight}}">
    <map id="myMap" style="width: 100%; height: {{mapHeight}}" longitude="{{now_longitude ? now_longitude : default_longitude}}" latitude="{{now_latitude ? now_latitude : default_latitude}}" scale="{{scaleNum}}" polyline="{{polyline}}" markers="{{markers}}" show-location></map>
  </view>
  <view wx:if="{{searchData.length > 0}}" class='routeLineBox'>

    <view class='route_item' wx:for="{{searchData}}" data-name="{{item.title}}" data-address="{{item.address}}" data-id="{{item.id}}" data-lng="{{item.location.lng}}" data-lat="{{item.location.lat}}" bindtap='navigation'>
      <view class='content oneLineBetween'>
        <view class='textBox'>
          <text class='name no-wrap'>{{item.title}}</text>
          <text class='distance'> {{item.distance}}km</text>
          <text class='caption line-clamp'>{{item.address}}</text>
        </view>
        <view class='imgBigBox'>
          <view class='imgBox'>
            <image src="../../assets/map.png" style='width:34rpx;height:38rpx;' mode="aspectFit"></image>
          </view>
          <text class='line'>路线</text>
        </view>
      </view>
    </view>
  </view>
</view>